---
layout: post
title: '自定義AJAX送表單'
date: 2016-03-08 04:38
comments: true
categories: 
---
紀錄如何自定義AJAX送表單

jquery重導網頁
`window.location.replace("url_to_redirect");`


``` html
...
<button id="button_to_submit" type="button" class="btn">Submit</button>
...
```

``` javascript
<script>
// 在DOM完成後才做
$(document).ready(function(){

	// 註冊event handler
  $("#button_to_submit").on('click', function(){
  
		// 自定義的表單檢查，如果沒過就不會送出
		if(field_check("#order_form", true)){
  		var a = $("#a").val();
    	var b = $("#a").val();
    	var a_a = $("#a_a").val();
    	var a_b = $("#a_b").val();
    
    	$.ajax({
      	url: '/api/v1/cart/submit_order',
      	type: "POST",
      	contentType: 'application/json',
      	dataType: "JSON",
      	data: JSON.stringify({
        	a: {a_a: a_a, a_b: a_b},
        	b: b
      	}),
      	statusCode: {
        	200: function(response){
          	window.location.replace(response.url);
        	},
        	404: function(){
          	...display error...
        	}
      	}
    	})	// end ajax
  	}	// end if
  	//validation fail
  	else
  	{  return false;  }
  }	// end event handler
})

</script>
```
